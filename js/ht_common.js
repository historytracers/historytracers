var lastTreeLoaded,personNameMap,familyMap,contentMap,primarySourceMap,refSourceMap,holyRefSourceMap,smSourceMap,genealogicalStats,smGame,smGameTimeoutID,htAtlas,htHistoryIdx,htLiteratureIdx,htFirstStepsIdx,htFamilyIdx,htGameImages,htGameImagesLocation,htSequenceGame,htSequenceGameLocation,htEditable,htEditableCheck,stringConstructor="HT".constructor,vectorConstructor=[].constructor,objectConstructor={}.constructor;let keywords=[],mathKeywords=[];lastTreeLoaded={page:null,arg:""},personNameMap=new Map,familyMap=new Map,contentMap=new Map,primarySourceMap=new Map,refSourceMap=new Map,holyRefSourceMap=new Map,smSourceMap=new Map,genealogicalStats={},smGame=[],smGameTimeoutID=0,htAtlas=[],htHistoryIdx=new Map,htLiteratureIdx=new Map,htFirstStepsIdx=new Map,htFamilyIdx=new Map,htGameImages=["MachuPicchu.jpg","WitzXunantunich.jpg","TeotihuacanGeneral.jpg","TeotihuacanMountains.jpg","CaralPiramideH1.jpg","PachacutiCusco.jpg","CahalPech.jpg","CaracolWitz.jpg","JoyaCeren.jpg","SanAndres.jpg","NecropoleTikal.jpg","CiudadTula.jpg","Huaca.jpg","MiPueblito.jpg","Copan/CopanAltarGenealogy0.jpg","Copan/CopanAltarGenealogy1.jpg","Copan/CopanAltarGenealogy2.jpg","Copan/CopanAltarGenealogy3.jpg","StelaACopan.jpg","Copan/CopanWholeTextStelaAltar.png","Kaminaljuyu.jpg"],htGameImagesLocation=["Machu Picchu, Perú","Xunantunich, Belieze","Teotihuacan, México","Caral, Perú","Cusco, Perú","Cahal Pech, Belieze","Caracol, Belieze","Joya de Ceren, El Salvador","San Andres, El Salvador","Tikal, Guatemala","Ciudad de Tula, México","Huaca Puclana, Perú","Mi Pueblito, Panamá","Copan, Honduras","Copan, Honduras","Copan, Honduras","Copan, Honduras","Teotihuacan, México","Copan, Honduras","Copan, Honduras","Kaminaljuyu, Guatemala"],htSequenceGame=["CeramicaAntropologiaPeru.jpg","ChocolatPotCahalPech.jpg","EstelaAntropologiaGuatemala.jpg","Kaminaljuyu.jpg","MayaCRJade.jpg","MetateTeotihuacan.jpg","SanJoseCRAntropologia.jpg","SanSalvadorESAntropologia.jpg","StelaACopan.jpg","MusicCR.jpg"],htSequenceGameLocation=["Lima, Peru","Cahal Pech, Belize","Ciudad de Guatemala, Guatemala","Kaminaljuyu - Ciudad de Guatemala, Guatemala","San Jose, Costa Rica","Teotihuacan, Mexico","San Jose, Costa Rica","San Salvador, El Salvador","Copan, Honduras","San Jose, Costa Rica"],htEditable=void 0,htEditableCheck=!0;function htEnableEdition(){}function htScroolToID(e){$("html, body").scrollTop($(e).offset().top)}function htResetGenealogicalStats(){return{primary_src:0,reference_src:0,holy_src:0,families:0,people:0,marriages:0,children:0}}function htAddTreeReflection(e,t){$(e).length>0&&keywords.length>=t&&$(e).html(keywords[t])}function htAddReligionReflection(e){$(e).length>0&&keywords.length>68&&$(e).html(keywords[69])}function htAddPaperDivs(e,t,n,s,o,i){var a=s+'<div id="paper-';a+=t??i,a+='">',a+=n,a+="</div>"+o,$(e).append(a)}function htShowDateRef(){var e='John Walker - Fourmilab . [ Accessed on Apr 26, 2024 ]. Retrieved from <a href="https://www.fourmilab.ch/documents/calendar/" target="_blank">https://www.fourmilab.ch/documents/calendar/</a>';$("#tree-ref").html(e)}function htUpdateCurrentDateOnIndex(){var e=Math.floor(Date.now()/1e3),t=$("#site_language").val(),n=$("#site_calendar").val(),s=htConvertDate(n,t,e,void 0,void 0);$("#current_day").html(keywords[42]+" "+s+' <sup><a href="#" onclick="htCleanSources(); htShowDateRef();  return false;">Walker, J.</a></sup>')}function htFillSourceContentToPrint(e,t,n){if(t.size==0||e.size==0)return e;var s,o,a,r,i="";for(let[n,e]of t)s="",e.date!=void 0&&e.date!=null&&e.date.length>0&&(a=e.date.split("-"),r=htFillHTDate(a),s=". [ "+keywords[22]+" "+r+" ]."),o="",e.url!=void 0&&e.url!=null&&e.url.length>0&&(o=keywords[23]+"  "+e.url),i+="<p>"+e.citation+" "+s+" "+o+"</p>";return e=e.replace('<div id="'+n+'" class="cited-text"></div>','<div id="'+n+'" class="cited-text">'+i+"</div>"),e}function htPrintContent(e,t){var o=$(e).html(),i=$(t).html(),n=$(".right-sources").html(),n=htFillSourceContentToPrint(n,primarySourceMap,"tree-source"),n=htFillSourceContentToPrint(n,refSourceMap,"tree-ref"),n=htFillSourceContentToPrint(n,holyRefSourceMap,"tree-holy-ref"),n=htFillSourceContentToPrint(n,smSourceMap,"tree-sm-ref"),a="<p><h1><center>"+o+"</center></h1></p><p>"+i+"</p><p>"+n+"</p>",s=window.open("","PRINT");s.document.write(a),s.document.close(),s.window.focus(),s.window.print()}function htAdjustGregorianZeroYear(e){var t=e.split(" "),n=t[0]+" ",s=t.length-1;for(let e=1;e<s;e++)n+=t[e]+" ";return n+"0"}function htConvertDate(e,t,n,s,o){var i,a,c,d,h,m,f,p,g,l=void 0,u=void 0,r=void 0;if(n!=null)u=parseInt(n),l=new Date(0),r=calcUnixTime(u);else if(s!=null)u=parseInt(s),r=calcJulian(s),l=new Date(r[0],r[1],r[2]);else if(o!=null)u=gregorian_to_jd(o[0],o[1],o[2]),r=calcJulian(u),l=new Date(o[0],o[1]-1,o[2],0,0,0),l.setFullYear(o[0],o[1]-1,o[2]);else return;switch(l.toLocaleString(t,{timeZone:"UTC"}),d=gregorian_to_jd(r[0],r[1],r[2]),i="",m=" "+keywords[43],a=0,e){case"gregory":case"hebrew":case"islamic":case"persian":break;case"julian":return i=d+" "+keywords[41],i;case"emesoamerican":a=jd_to_extended_mayan_count(d);case"mesoamerican":return a==0&&(a=jd_to_mayan_count(d)),f=jd_to_mayan_haab(d),p=jd_to_mayan_tzolkin(d),i=a[0]+"."+a[1]+"."+a[2]+"."+a[3]+"."+a[4]+"."+a[5]+"."+a[6]+"."+a[7]+" ( Haab: "+f[1]+" "+MAYAN_HAAB_MONTHS[f[0]-1]+", Tzolkin: "+p[1]+" "+MAYAN_TZOLKIN_MONTHS[p[0]-1]+" )",i;case"french":return c=jd_to_french_revolutionary(d),m=c[0]<0?Math.abs(c[0])+" "+keywords[43]:c[0],i="Année "+m+" Mois "+frMonth[c[1]-1]+" Décade "+frDecade[c[2]-1]+" Jour "+frDay[c[1]<=12?c[3]:c[3]+11],i;case"shaka":return h=jd_to_indian_civil(d),m=h[0]<0?Math.abs(h[0])+" "+keywords[43]:h[0],i=h[2]+"."+indianMonths[h[1]-1]+"."+m,i;case"hispanic":u+=1199188800;default:e="gregory";break}return n!=null&&l.setUTCSeconds(u),i=new Intl.DateTimeFormat(t,{dateStyle:"medium",calendar:e}).format(l),e=="gregory"&&(g=l.getFullYear(),g<0?i+=" "+keywords[43]:g==0&&(i=htAdjustGregorianZeroYear(i))),i}function htConvertGregorianYearToJD(e){var n,t=new Date;return e!="now"&&(n=parseInt(e),t.setYear(n)),gregorian_to_jd(e,t.getMonth(),t.getDate())}function htConvertGregorianYear(e,t){var n,o,i,a,r,c,l,d,u,s=0;if(t!="now"?s=parseInt(t):(d=new Date,s=d.getFullYear()),i=htConvertGregorianYearToJD(s),n="",e=="gregory")s>=0?n+=s:n+=Math.abs(s)+" "+keywords[43];else{switch(u=void 0,o=0,e){case"hebrew":converted=jd_to_hebrew(i);break;case"islamic":converted=jd_to_islamic(i);break;case"persian":converted=jd_to_persian(i);break;case"julian":return n=i+" "+keywords[41],n;case"emesoamerican":o=jd_to_extended_mayan_count(i);case"mesoamerican":return o==0&&(o=jd_to_mayan_count(i)),c=jd_to_mayan_haab(i),l=jd_to_mayan_tzolkin(i),n=o[0]+"."+o[1]+"."+o[2]+"."+o[3]+"."+o[4]+"."+o[5]+"."+o[6]+"."+o[7]+" ( Haab: "+c[1]+" "+MAYAN_HAAB_MONTHS[c[0]-1]+", Tzolkin: "+l[1]+" "+MAYAN_TZOLKIN_MONTHS[l[0]-1]+" )",n;case"french":return a=jd_to_french_revolutionary(i),s=a[0]<0?mod(a[0])+keywords[43]:a[0],n=""+s,n;case"shaka":return r=jd_to_indian_civil(i),s=r[0]<0?mod(r[0])+s:r[0],n=""+s,n;case"hispanic":converted=new Array(""+(parseInt(s)+38));break;default:return void 0}converted[0]>=0?n+=converted[0]:n+=Math.abs(converted[0])+" "+keywords[43]}return n}function htConvertGregorianDate(e,t,n,s,o){var a,r,i="";return n!="now"?i=parseInt(n):(a=new Date,i=a.getFullYear()),r=new Array(i,s,o),htConvertDate(e,t,void 0,void 0,r)}function htConvertUnixDate(e,t,n){return htConvertDate(e,t,n,void 0,void 0)}function htConvertJulianDate(e,t,n){return htConvertDate(e,t,void 0,n,void 0)}function htFillDivAuthorsContent(e,t,n,s){if(t<=0)return;if($("#paper-date").length>0)return;var o='<p><div id="paper-title" class="paper-title-style"><div id="paper-date" class="paper-date-style">',i=$("#site_language").val(),a=$("#site_calendar").val(),r=htConvertDate(a,i,t,void 0,void 0);keywords.length>33&&(o+=keywords[34]+" : "+n+".<br />"),keywords.length>35&&(o+=keywords[36]+" : "+s+".<br />"),o+=keywords[33]+" : "+r+".",o+=`</div><div id="paper-print" class="paper-print-style"><a href="#" class="fa-solid fa-print" onclick="htPrintContent('#header', '#page_data'); return false;"></a></div></div><br /><i>`+keywords[24]+" "+keywords[38]+"</i></p>",$(e).append(o)}function htLoadPageMountURL(e,t,n){var s="lang/",o=$("#site_language").val();return(o==null)&&(o=htDetectLanguage()),t=="source"?s+=t+"s/":s+=o+"/",n.length!=0&&(s+=n+"/"),s+=e+".json",s}function htOverwriteHTDateWithText(e,t,n,s){if(t==null||t.length==0)return e;var i,o=e;for(const e in t)i=o.replace("<htdate"+e+">",htMountSpecificDate(t[e],n,s)),o=i;return o}function htParagraphFromObject(e,t,n){var s,o,r,c,a=e.format==void 0?"html":e.format,i="";if(e.fill_dates!=void 0?i=htOverwriteHTDateWithText(e.text,e.fill_dates,t,n):e.date_time!=void 0?i=htOverwriteHTDateWithText(e.text,e.date_time,t,n):i=e.text,s=a=="html"?"<p>":"",s+=htFormatText(i,a,e.isTable),e.source!=void 0&&e.source!=null){o=e.source,s+=" (";for(const e in o)e!=0&&(s+=" ; "),r=htFillHistorySourcesSelectFunction(o[e].type),c=o[e].date!=void 0?", "+htMountSpecificDate(o[e].date,t,n):"",s+='<a href="#" onclick="htCleanSources(); '+r+"('"+o[e].uuid+`'); return false;"><i>`+o[e].text+" "+c+"</i></a>";s+=")"}return s+=e.PostMention!=void 0&&e.PostMention!=null?e.PostMention:"",s+"</p>"}function htFillSMGameData(e){if(e==null||e.content.length==0)return;var t,n,s,o,i,a,r,c,l,u,h,m,d=document.getElementsByClassName("htSlide");if(d.length!=0&&$(".htSlide").remove(),a=opt0ac0098b.requestType,t=e.levels,t!=null&&a=="splash"&&$("#smGameMenu").length==0){$(opt0ac0098b.target).append('<div class="htSlideGameMenu htSlideGameMenuHidden" id="smGameMenu"></div> <div id="smGameScore" class="htSlideGameScore htSlideGameMenuHidden"><b>'+keywords[70]+'<span id="currentSMScore">0</span></b></div> <div class="htSlideGameTextBottom smGameTextSize htSlideGameMenuHidden" id="smGameDesc"></div> <div id="smGamePlay"><i class="fa-solid fa-play htSlidePlayGame" onclick="htStartSMGame();"></i></div>');for(const e in t){if(t[e].type==void 0)continue;t[e].type=="topLevel"?$("#smGameMenu").append('<p class="smGameTextSize"><b>'+t[e].name+"</b>: "+t[e].desc+'</p><p><ul id="'+t[e].id+'"></ul></p>'):t[e].type=="level"&&$("#"+t[e].target).length>0&&$("#"+t[e].target).append(`<li class="menu"> <span class=" smGameTextSize"><a href="javascript:void(0);" onclick="htLoadPageV1('`+t[e].loadID+`', 'json', '', 'false', 'smGame', '');">`+t[e].name+"</a>: "+t[e].desc+"</span></li>")}c=getRandomArbitrary(0,htGameImages.length-5),$(opt0ac0098b.target).append('<p class="desc"><img class="imgGameSizeWithOpacity" src="images/'+htGameImages[c]+'"><br />'+keywords[71]+" "+htGameImagesLocation[c]+".</p>")}smGame=[],t=e.content,m=a=="splash"?"htSlideGameTextCenter":"htSlideGameTextTopCenter",l=-1;for(const e in t){if(t[e].position!=void 0)switch(t[e].position){case"center":o="htSlideGameTextCenter";break;case"topCenter":o="htSlideGameTextTopCenter";break;default:o="htSlideGameTextTop"}else o=m;if(i="",u=$("#site_language").val(),h=$("#site_calendar").val(),t[e].text!=void 0)if(t[e].text.constructor===vectorConstructor){n=t[e].text;for(const s in n)r=n[s].constructor===stringConstructor?n[s]:htParagraphFromObject(n[s],u,h),t[e].paragraphClass!=void 0&&(r=r.replace(/<p>/g,'<p class="'+t[e].paragraphClass+'">')),i+=r}else i=t[e].text;if(s=null,t[e].desc!=void 0)if(t[e].desc.constructor===vectorConstructor){n=t[e].desc,s="";for(const e in n)s+=n[e]}else s=t[e].desc;smGame.push({desc:s,prev:t[e].prev,next:t[e].next,jumpTo:t[e].jumpTo,score:t[e].score,answer:t[e].answer,played:!1}),$(opt0ac0098b.target).append('<div class="htSlide" id="'+t[e].id+`"><div class='`+o+"'>"+i+"</div>"),l++}opt0ac0098b.maxID=l,d=document.getElementsByClassName("htSlide"),a!="splash"?($("#smGameNext").length==0?($(opt0ac0098b.target).append('<div id="smGameNext"><i class="fa-solid fa-chevron-right htSlideNextGame" onclick="htPlusSMGameDivs(1);"></i></div> <div id="smGamePrev"><i class="fa-solid fa-chevron-left htSlidePrevGame htSlideGameMenuHidden" onclick="htPlusSMGameDivs(-1);"></i></div> <div id="smGameLike"><i class="fa-solid fa-thumbs-up htSlideLikeGame" onclick="htSMCheckAnswer(1);"></i></div> <div id="smGameUnlike"><i class="fa-solid fa-thumbs-down htSlideUnlikeGame" onclick="htSMCheckAnswer(0);"></i></div>'),$("#smGameLike").addClass("htSlideGameMenuHidden"),$("#smGameUnlike").addClass("htSlideGameMenuHidden"),$("#currentSMScore").html(totalSMScore)):($("#smGameNext").removeClass("htSlideGameMenuHidden"),$("#smGamePrev").removeClass("htSlideGameMenuHidden")),$("#smGameMenu").addClass("htSlideGameMenuHidden"),$("#smGameScore").hasClass("htSlideGameMenuHidden")&&$("#smGameScore").removeClass("htSlideGameMenuHidden"),htShowSlideDivs(d,0)):smGameTimeoutID!=0&&(clearTimeout(smGameTimeoutID),smGameTimeoutID=0),$("table").each(function(){$(this).hasClass("book_navigation")||$(this).addClass("three_table_bg")})}function htImageZoom(e,t){var n=$("#"+e).prop("name");n.length==0?($("#"+e).attr("name","zoomin"),$("#"+e).css("transform","scale(2.7)"),$("#"+e).css("translate",t)):($("#"+e).attr("name",""),$("#"+e).css("transform","scale(1)"),$("#"+e).css("translate","0%"))}function htModifyAtlasIndexMap(e){var n,t=parseInt(e)+1;$("#atlasindex option[value="+t+"]").prop("selected",!0),n="index.html?page=atlas&atlas_page="+t,window.history.replaceState(null,null,n),$("#atlas").val(t)}function htFormatText(e,t,n){if(t=="html")return e;var s,i,o=new showdown.Converter;return(n!=null&&n==!0||n==1)&&o.setOption("tables",!0),s=o.makeHtml(e),s.length<4?s:(i=s.substring(s.length-4),i=="</p>"?s.substring(0,s.length-4):s)}function htSelectAtlasMap(e){if(htAtlas.length<e||e<0)return;var n,s,o,a,r,c,t=htAtlas[e],i="";t.author!=null&&(t.author=="HTMW"||t.author.length==0?i=keywords[82]:i=t.author),n=htFormatText(t.text,t.format,t.isTable),t.format==void 0||t.format=="html"?n="<p>"+n+"</p>":n+="</p>",a=t.image!=null?'<p class="desc"><img id="atlasimg" src="'+t.image+`" class="imgcenter" onclick="htImageZoom('atlasimg', '-35%')" />`+keywords[81]+" 1: "+i+".</p>"+n:n,s=e-1,o=e+1,r=s>=0?'<a href="javascript:void(0);" onclick="htSelectAtlasMap('+s+"); htModifyAtlasIndexMap("+s+');">'+htAtlas[s].name+"</a>":"&nbsp;",c=o<htAtlas.length?'<a href="javascript:void(0);" onclick="htSelectAtlasMap('+o+"); htModifyAtlasIndexMap("+o+');">'+htAtlas[o].name+"</a>":"&nbsp;",a+='<p><div style="width: 50%; float: left; font-weight: bold;">'+keywords[56]+"<br />"+r+'</div><div style="width: 50%; float: right; font-weight: bold; text-align: right;">'+keywords[58]+"<br />"+c+"</div></p><p>&nbsp;</p>",$("#rightcontent").html(a)}function htFillAtlas(e){if(htAtlas=[],e.atlas.length==0)return;var n,s,o,a,r,c,l,d,u,t=e.atlas,h=$("#site_language").val(),m=$("#site_calendar").val();for(i in t){o="";for(const e in t[i].text)s=t[i].text[e],r=s.text!=void 0&&s.source!=void 0?htParagraphFromObject(s,h,m):s,o+=r;c=t[i].author!=void 0&&t[i].author.length>0?t[i].author:null,l=t[i].isTable!=void 0&&t[i].isTable,d=t[i].format!=void 0?t[i].format:"html",htAtlas.push({name:t[i].name,image:t[i].image,author:c,text:o,format:d,isTable:l}),a=parseInt(i)+1,u=new Option(a+". "+t[i].name,a),$("#atlasindex").append(u)}n=$("#atlas").length>0?$("#atlas").val():0,isNaN(n)||n.length==0?(htModifyAtlasIndexMap(1),n=1):(n-=1,htModifyAtlasIndexMap(n)),htSelectAtlasMap(n)}function htProccessData(e){if(e.type==void 0)return!1;switch(e.type){case"sm_game":htFillSMGameData(e);break}e.fill_dates!=void 0&&e.fill_dates.constructor===vectorConstructor?htFillHTDate(e.fill_dates):e.date_time!=void 0&&e.date_time.constructor===vectorConstructor&&htFillHTDate(e.date_time),$("#family_common_sn").length>0&&$("#family_common_sn").html(keywords[52])}function htLoadPageV1(e,t,n,s,o,i){$("#messages").html("&nbsp;"),$("#loading_msg").show();var a=htLoadPageMountURL(e,n,o),r=Date.now();$.ajax({type:"GET",url:a,contentType:"application/json; charset=utf-8",data:"nocache="+r,async:!0,dataType:"json",success:function(t){return t.length==0?($("#loading_msg").hide(),!1):t.version!=void 0&&t.version!=null&&(htLoadIndex(t,n,e),htLoadSources(t,n,e),htProccessData(t,i),n!=source&&htEnableEdition(),!1)}})}function htLoadPage(e,t,n,s){if($("#messages").html("&nbsp;"),t=="html"){switch(e!="tree"&&($(".right-tree").css("display","none"),$(".right-tree").css("visibility","hidden")),e){case"tree":case"genealogical_map_list":case"class_content":s==!0&&lastTreeLoaded.arg!=null&&lastTreeLoaded.arg.length>0?(n=lastTreeLoaded.arg,htHistoryIdx.clear(),htLiteratureIdx.clear(),htFirstStepsIdx.clear(),htFamilyIdx.clear()):(lastTreeLoaded.page=e,lastTreeLoaded.arg=n),e=="tree"&&($(".right-tree").css("display","block"),$(".right-tree").css("visibility","visible"));var o,i,a,r,c,l=n!=null?"index.html?page="+e+"&arg="+n:"index.html?page="+e;genealogicalStats=htResetGenealogicalStats(),window.history.replaceState(null,null,l);break;case"families":lastTreeLoaded.page=null,lastTreeLoaded.arg=null,$("#loading").val(""),$("#selector").val("");default:window.history.replaceState(null,null,"index.html?page="+e);break}$("#tree-source").html(""),$("#tree-ref").html(""),$("#tree-holy-ref").html("")}return o=n.split("&person_id="),i="",o.length!=2?$("#loading").val(n):(i=o[0],t=="html"&&($("#loading").val(o[0]),$("#selector").val(o[1]))),t.length!=null&&t.length>0&&t=="html"&&$("#html_loaded").val(e),a=Date.now(),t=="html"?(primarySourceMap.clear(),refSourceMap.clear(),holyRefSourceMap.clear(),smSourceMap.clear(),r=i.length==0?"&":i+"&",$("#page_data").load("bodies/"+e+"."+t+"?load="+r+"nocache="+a),!1):(c=htLoadPageMountURL(e,n,""),$("#loading_msg").show(),$.ajax({type:"GET",url:c,contentType:"application/json; charset=utf-8",data:"nocache="+a,async:!0,dataType:"json",success:function(t){return t.length==0?($("#loading_msg").hide(),!1):(htLoadIndex(t,n,e),htLoadSources(t,n,e),htFillWebPage(e,t),n!="source"&&htEnableEdition(),!1)}}),!1)}function htFillClassWithText(e,t){$(e).each(function(){$(this).html(t)})}function htDetectLanguage(){var t,n,e=navigator.language||navigator.userLanguage;return e==null||e.length==0?e="en-US":(t=e.substring(0,2).toLowerCase(),$("#site_language option[value='"+e+"']").length>0==!1&&(t=="pt"?e="pt-BR":t=="es"?e="es-ES":e="en-US"),n=e.substring(3).toUpperCase(),t=e.substring(0,2).toLowerCase(),e=t+"-"+n),e}function htMountSpecificDate(e,t,n){var s;switch(e.type){case"gregory":e.day>0?s=htConvertGregorianDate(n,t,e.year,e.month,e.day):s=htConvertGregorianYear(n,e.year);break;case"unix":s=htConvertUnixDate(n,t,e.epoch);break;case"julian":s=htConvertJulianDate(n,t,e.day);break}return s}function htFillHTDate(e){var n=$("#site_language").val(),s=$("#site_calendar").val(),t=0;$(".htdate").each(function(){if(t==e.length)return;var o=e[t++],i=htMountSpecificDate(o,n,s);$(this).html(i)})}function htFillStringOnPage(e,t,n){if(e.content[t].html_value!=void 0&&e.content[t].target==void 0)$("#"+e.content[t].id).append(e.content[t].html_value);else if(e.content[t].id!=void 0&&e.content[t].id=="fill_dates"){htFillHTDate(e.content[t].text);return}else if(e.content[t].id!=void 0&&e.content[t].id=="date_time"){htFillHTDate(e.content[t].text);return}var s="";if(e.content[t].html_value!=void 0)s=e.content[t].html_value;else if(e.content[t].value!=void 0)s=e.content[t].value;else return;$("#"+e.content[t].id).length>0?$("#"+e.content[t].id).html(s):(n=="families"||n=="history"||n=="literature"||n=="first_steps")&&e.content[t].target!=void 0&&$("#group-map").append('<ul><b><span id="'+e.content[t].id+'">'+s+'</span></b><ol id="'+e.content[t].target+'"></ol></ul><br />')}function htFillWebPage(e,t){if(t.title!=void 0&&t.title!=null&&t.title.length>0&&$(document).prop("title",t.title),t.header!=void 0&&t.header!=null&&t.header.length>0)$("#header").html(t.header);else if(t.nothing!=void 0&&t.nothing!=null&&t.nothing.length>0){$(document).prop("title",t.nothing),$("#header").html(t.nothing);return}if(t.common!=void 0&&t.common!=null&&t.common.length>0){var n,s,o,i,a,r,c,l,d,u,h,f=$("#site_language").val(),m=$("#site_calendar").val();for(const e in t.common)o=t.common[e],r=o.constructor===stringConstructor?o:htParagraphFromObject(o,f,m),$("#common").append(r)}if(n=0,t.last_update!=void 0&&t.last_update!=null&&(n=t.last_update),i=keywords.length>34?keywords[35]:"Editors of History Tracers",s=keywords.length>36?keywords[37]:"Reviewers of History Tracers",t.authors!=void 0&&t.authors!=null&&t.authors.length>0&&(i=t.authors),t.reviewers!=void 0&&t.reviewers!=null&&t.reviewers.length>0&&(s=t.reviewers),$("#extpaper").length>0&&n>0&&htFillDivAuthorsContent("#extpaper",n,i,s),t.languages!=void 0){htFillIndexSelector(t.languages,"#site_language"),$("#loading_msg").hide(),$(":focus").blur();return}if(t.calendars!=void 0){htFillIndexSelector(t.calendars,"#site_calendar"),$("#loading_msg").hide(),$(":focus").blur();return}if(t.themes!=void 0&&(htFillIndexSelector(t.themes,"#site_theme"),$("#loading_msg").hide(),$(":focus").blur()),t.families!=void 0)htFillFamilies(e,t);else if(t.keywords!=void 0)htFillKeywords(t.keywords),$("#loading_msg").hide();else if(t.math_keywords!=void 0)htFillMathKeywords(t.math_keywords),$("#loading_msg").hide();else{for(const o in t.content){if(t.content[o].value==void 0||t.content[o].value==null){htFillStringOnPage(t,o,e);continue}if(t.content[o].value.constructor===stringConstructor)htFillStringOnPage(t,o,e);else if(t.content[o].value.constructor===vectorConstructor&&t.content[o].target!=void 0){if(t.content[o].value_type==void 0)continue;t.content[o].value_type=="family-list"?(c=t.content[o].value,htFillFamilyList(c,t.content[o].target)):t.content[o].value_type=="group-list"?(t.content[o].id!=void 0&&t.content[o].id!=null&&t.content[o].id.length>0&&t.content[o].desc!=void 0&&t.content[o].desc.length>0&&$("#"+t.content[o].id).html(t.content[o].desc),htFillMapList(t.content[o].value,t.content[o].target,t.content[o].page)):t.content[o].value_type=="subgroup"?htFillSubMapList(t.content[o].value,t.content[o].target):t.content[o].value_type=="paper"&&htFillPaperContent(t.content[o].value,n,i,s,t.index)}else if(t.content[o].value.constructor===vectorConstructor&&t.content[o].id!=void 0)if(t.content[o].id!="fill_dates")for(const e in t.content[o].value)$("#"+t.content[o].id).append(t.content[o].value[e]);else if(t.content[o].id!="date_time")for(const e in t.content[o].value)$("#"+t.content[o].id).append(t.content[o].value[e]);else t.content[o].value.constructor===vectorConstructor&&htFillHTDate(t.content[o].value)}t.date_time!=void 0&&htFillHTDate(t.date_time),t.atlas!=void 0&&htFillAtlas(t),$("#tree-sources-lbl").length>0&&$("#tree-sources-lbl").html(keywords[5]),$("#tree-references-lbl").length>0&&$("#tree-references-lbl").html(keywords[6]),$("#tree-holy_references-lbl").length>0&&$("#tree-holy_references-lbl").html(keywords[7]),$("#tree-sm-lbl").length>0&&$("#tree-sm-lbl").html(keywords[75]),$("#tree-description").length>0&&$("#tree-description").html(" <p>"+keywords[52]+"</p>")}if(t.scripts!=void 0&&t.scripts!=null)for(const e in t.scripts)l="js/"+t.scripts[e]+".js",$.getScript(l,function(){typeof htLoadExercise!="undefined"&&htLoadExercise(),$("#btncheck").length>0&&$("#btncheck").on("click",function(){return typeof htCheckAnswers!="undefined"&&htCheckAnswers(),!1}),$("#btnnew").length>0&&$("#btnnew").on("click",function(){return typeof htLoadExercise!="undefined"&&htLoadExercise(),!1})});if(htFillClassWithText(".htPrevText",keywords[56]),htFillClassWithText(".htTopText",keywords[57]),htFillClassWithText(".htNextText",keywords[58]),htFillClassWithText(".htIndexText",keywords[60]),$("#family_common_sn").length>0&&$("#family_common_sn").html(keywords[52]),$("#htZoomImageMsg").length>0&&$("#htZoomImageMsg").html(keywords[84]),$("#htAmericaAbyaYalaMsg").length>0&&$("#htAmericaAbyaYalaMsg").html(keywords[85]),$("#tree-common-stats").length<=0)return!1;a=["#tree-common-stats","#statsDescription","#genStatRow00","#genStatRow01","#genStatRow10","#genStatRow20","#genStatRow30","#genStatRow40","#genStatRow50","#genStatRow60","#genStatRow70"],d=[61,62,63,64,5,6,7,65,66,67,68,69];for(let e=0;e<a.length;e++)$(a[e]).html(keywords[d[e]]);u=["#genStatRow11","#genStatRow21","#genStatRow31","#genStatRow41","#genStatRow51","#genStatRow61","#genStatRow71"],h=0,Object.values(genealogicalStats).forEach(e=>{$(u[h++]).html(e)})}function htFillHistorySourcesSelectFunction(e){switch(e){case 0:return"htFillPrimarySource";case 1:return"htFillReferenceSource";case 2:return"htFillHolySource";case 3:default:return"htFillSMSource"}}function htSelectIndexMap(e){return e=="history"?htHistoryIdx:e=="literature"?htLiteratureIdx:e=="first_steps"?htFirstStepsIdx:e=="families"?htFamilyIdx:void 0}function htBuildNavigation(e){var t,n,s,o,i,r,c,l,d,a=new URLSearchParams(window.location.search);return a.has("arg")?(r=a.get("arg"),s=htSelectIndexMap(e),t=s.get(r),t==null?null:(n=e=="families"?"tree":"class_content",o="",t.prev==e?o='<a href="index.html?page='+e+`" onclick="htLoadPage('`+e+`','html', '', false); return false;"><span>`+keywords[60]+"</span></a>":(c=s.get(t.prev),o='<a href="index.html?page='+n+"&arg="+t.prev+`" onclick="htLoadPage('`+n+"', 'html', '"+t.prev+`', false); return false;">`+c.name+"</a>"),i="",t.next==void 0?i="&nbsp;":(l=s.get(t.next),i='<a href="index.html?page='+n+"&arg="+t.next+`" onclick="htLoadPage('`+n+"', 'html', '"+t.next+`', false); return false;">`+l.name+"</a>"),d='<p><table class="book_navigation"><tr><td><span>'+keywords[56]+"</span></td> <td> <span>"+keywords[57]+"</span> </td> <td><span>"+keywords[58]+"</span></td></tr><tr><td>"+o+'</td> <td><a href="index.html?page='+e+`" onclick="htLoadPage('`+e+`','html', '', false); return false;"><span>`+keywords[60]+"</span></td><td>"+i+"</td></tr></table></p>",d)):null}function htWriteNavigation(e){var t=htBuildNavigation(e);$(".dynamicNavigation").each(function(){$(this).html(t)})}function htFillTopIdx(e,t,n){var s,i,a,r,c,o=n;e.set(n,{prev:n,next:void 0,name:keywords[57]});for(const l in t.content){if(t.content[l].html_value!=void 0&&t.content[l].html_value.length>0||t.content[l].value.constructor!==vectorConstructor||t.content[l].page==void 0)continue;s=t.content[l].value,c="";for(const t in s)i=e.get(o),i!=null&&(i.next=s[t].id),a=s[t].name.length,n=="families"&&(r=s[t].name.search("\\(<span"),r>0&&(a=r)),e.set(s[t].id,{prev:o,next:void 0,name:s[t].name.substring(0,a)}),o=s[t].id}}function htLoadIndex(e,t,n){if(n=="history"&&htHistoryIdx.has("history")==!1){htFillTopIdx(htHistoryIdx,e,"history");return}if(n=="first_steps"&&htFirstStepsIdx.has("first_steps")==!1){htFillTopIdx(htFirstStepsIdx,e,"first_steps");return}if(n=="literature"&&htLiteratureIdx.has("literature")==!1){htFillTopIdx(htLiteratureIdx,e,"literature");return}if(n=="families"&&htFamilyIdx.has("families")==!1){htFillTopIdx(htFamilyIdx,e,"families");return}if(e.index==void 0)return;var s=htLoadPageMountURL(e.index,e.index,""),o=Date.now();$.ajax({type:"GET",url:s,contentType:"application/json; charset=utf-8",data:"nocache="+o,async:!0,dataType:"json",success:function(n){return n.length!=0&&(htLoadIndex(n,t,e.index),!1)}})}function htLoadSources(e,t,n){if(e.sources!=void 0)for(const t in e.sources)htLoadPage(e.sources[t],"json","source",!1);else{if(t!="source")return!0;if(htFillMapSource(primarySourceMap,e.primary_sources),htFillMapSource(refSourceMap,e.reference_sources),htFillMapSource(holyRefSourceMap,e.religious_sources),htFillMapSource(smSourceMap,e.social_media_sources),n.length==36&&(genealogicalStats.primary_src=e.primary_sources!=void 0?e.primary_sources.length:0,genealogicalStats.reference_src=e.reference_sources!=void 0?e.reference_sources.length:0,genealogicalStats.holy_src=e.religious_sources!=void 0?e.religious_sources.length:0),n=="tree")return $("#loading_msg").hide(),!1}return!0}function htFillIndexSelector(e,t){var n=$(t).val();$(t).find("option").remove();for(const n in e)$(t).append(new Option(e[n].text,e[n].dir));$(t).val(n)}function htFillKeywords(e){keywords=[];for(const t in e)keywords.push(e[t]);if(keywords.length<40)return;$("#index_lang").html(keywords[39]),$("#index_calendar").html(keywords[40]),$("#index_theme").html(keywords[74]),htUpdateCurrentDateOnIndex()}function htFillMathKeywords(e){mathKeywords=[];for(const t in e)mathKeywords.push(e[t])}function htFillFamilyList(e){for(const t in e){if(e[t].target==void 0){e[t].id!=void 0&&e[t].id=="fill_dates"?e[t].text.constructor===vectorConstructor&&htFillHTDate(e[t].text):e[t].id!=void 0&&e[t].id=="date_time"&&e[t].text.constructor===vectorConstructor&&htFillHTDate(e[t].text);continue}if($("#"+e[t].target).append('<div id="bottom'+e[t].id+'"><h3>'+e[t].id+"</h3></div>"),e[t].value.constructor===vectorConstructor){var n=e[t].value;$("#bottom"+e[t].id).append('<ul id="bottomList'+e[t].id+'"></ul>');for(const s in n)$("#bottomList"+e[t].id).append('<li id="'+n[s].id+'"><a href="index.html?page=tree&arg='+n[s].id+"&lang="+$("#site_language").val()+"&cal="+$("#site_calendar").val()+`" onclick="htLoadPage('tree', 'html', '`+n[s].id+`', false); return false;" >`+n[s].value+"</a></li>")}}}function htFillMapList(e,t,n){for(const s in e)e[s].id!="fill_dates"&&e[s].id!="date_time"?$("#"+t).append('<li id="'+e[s].id+'"><a href="index.html?page='+n+"&arg="+e[s].id+"&lang="+$("#site_language").val()+"&cal="+$("#site_calendar").val()+`" onclick="htLoadPage('`+n+"', 'html', '"+e[s].id+`', false); return false;" >`+e[s].name+"</a>: "+e[s].desc+"</li>"):e[s].text.constructor===vectorConstructor&&htFillHTDate(e[s].text)}function htFillSubMapList(e,t){for(const n in e)switch(e[n].page){case"class_content":e[n].id!=void 0&&e[n].name!=void 0&&e[n].desc!=void 0&&$("#"+t).append('<li id="'+n+'"><a href="index.html?page=class_content&arg='+e[n].id+"&lang="+$("#site_language").val()+"&cal="+$("#site_calendar").val()+`" onclick="htLoadPage('class_content', 'html', '`+e[n].id+`', false); return false;" >`+e[n].name+"</a>: "+e[n].desc+"</li>");break;case"tree":default:e[n].person_id!=void 0&&e[n].family_id!=void 0&&e[n].family_id.length>0&&e[n].fullname!=void 0&&e[n].desc!=void 0&&$("#"+t).append('<li id="'+n+'"><a href="index.html?page=tree&arg='+e[n].family_id+"&person_id="+e[n].person_id+"&lang="+$("#site_language").val()+"&cal="+$("#site_calendar").val()+`" onclick="htLoadPage('tree', 'html', '`+e[n].family_id+"&person_id="+e[n].person_id+`', false); return false;" >`+e[n].fullname+"</a>: "+e[n].desc+"</li>")}}function htCheckExerciseAnswer(e,t,n,s){var a=parseInt($("input[name="+e+"]:checked").val()),i="",o="";return a==t?(i=keywords[27],o="green"):(i=keywords[28],o="red"),$(n).length>0&&($(n).text(i),$(n).css("color",o)),$(s).length>0&&($(s).css("color",o),$(s).css("display","block"),$(s).css("visibility","visible")),!1}function htResetAnswers(e){for(let t=0;t<e.length;t++)$("#answer"+t).text(""),$("input[name=exercise"+t+"]").prop("checked",!1),$("#explanation"+t).css("display","none"),$("#explanation"+t).css("visibility","hidden")}function htWriteGame(e,t,n){var s='<p class="ht_description"><span id="htGameDataToBeUsed">',o=0;for(const t in e)s+=e[t].imageDesc+"|",o++;s+='</span><span id="htTotalGameData">'+o+"</span></p>",htAddPaperDivs("#paper","game1",s,"",t,n+1e3)}function htWriteQuestions(e,t,n){var o="<p><h3>"+keywords[50]+"</h3><ol>",i='<p class="ht_description"><span id="htAnswersToBeUsed">',s=0;for(const t in e)o+="<li>"+e[t].question+' <input type="radio" id="ans'+t+'yes" name="exercise'+t+'" value="1" /> <b><label>'+keywords[31]+'</label></b> <input type="radio" id="ans'+t+'no" name="exercise'+t+'" value="0" /> <b><label>'+keywords[32]+'</label></b>. <span class="ht_description" id="explanation'+t+'"><span id="answer'+t+'"></span> '+e[t].additionalInfo+"</span></li>",i+=e[t].yesNoAnswer=="Yes"?1+";":0+";",s=t;s>0&&s++,o+='</ol><input id="btncheck" type="button" onclick="return false;" value="'+keywords[29]+'" /> <input id="btnnew" type="button" onclick="return false;" value="'+keywords[30]+'" /></p>',i+='</span><span id="htTotalQuestions">'+s+"</span></p>",htAddPaperDivs("#paper","exercises0",o,"",t,n),htAddPaperDivs("#paper","exercises1",i,"",t,n+1e3)}function htLoadGameData(){var t,s,n=[],o='<p class="ht_description"><span id="htGameDataToBeUsed">',e=parseInt($("#htTotalGameData").html());if(e==null)return e;if(t=$("#htGameDataToBeUsed").html(),t==null)return e;s=t.split("|");for(let t=0;t<e;t++)n.push({imageDesc:s[t]});return $("#htAnswersToBeUsed").html(""),n}function htLoadAnswersFromExercise(){var t,s,n=[],e=parseInt($("#htTotalQuestions").html());if(e==null)return e;if(t=$("#htAnswersToBeUsed").html(),t==null)return e;s=t.split(";");for(let t=0;t<e;t++)n.push(parseInt(s[t]));return $("#htAnswersToBeUsed").html(""),n}function htFillPaperContent(e,t,n,s,o){var i,a,r,c,l,d=$("#site_language").val(),u=$("#site_calendar").val();$("#paper").html("<i>"+keywords[87]+"</i>"),r=e[0].text,i=0,a="";for(const h in e){if(h==1&&htFillDivAuthorsContent("#paper",t,n,s),o&&h==0?(r='<p class="dynamicNavigation"></p>',htAddPaperDivs("#paper","indexTop",r,"",'<hr class="limit" />',i),i++,a=""):(e[h].id=="navigation"&&(r=e[0].text),a=h==0&&t>0&&e[h].id=="navigation"?'<hr class="limit" />':""),e[h].text.constructor===stringConstructor)htAddPaperDivs("#paper",e[h].id,e[h].text,"",a,i);else if(e[h].text.constructor===vectorConstructor)if(e[h].id=="exercise_v2")htWriteQuestions(e[h].text,a,i);else if(e[h].id=="game_v1")htWriteGame(e[h].text,a,i);else if(e[h].id!="fill_dates"&&e[h].id!="date_time")for(const t in e[h].text)c=e[h].text[t],l=c.text!=void 0?htParagraphFromObject(c,d,u):c,htAddPaperDivs("#paper",e[h].id+"_"+t,l,"",a,i);else htFillHTDate(e[h].text);i++}r.length>0&&o!=null&&htAddPaperDivs("#paper","repeat-index",r,'<hr class="limit" />',"",1e5)}function htFillFamilies(e,t){if(t.title!=void 0&&$(document).prop("title",t.title),t.documentsInfo!=void 0&&t.documentsInfo!=null&&$("#overallInfo").length>0){var n,s,o,i,a,r,c,l,d,h,m,u="<p><h3>"+keywords[53]+"</h3>"+keywords[59]+"</p>";t.documentsInfo.length==4&&(u+=t.documentsInfo[3]),$("#overallInfo").html(u),$("#documentsInfoLang").length>0&&$("#documentsInfoLang").html(t.documentsInfo[0]),$("#documentsInfoCalendarName").length>0&&$("#documentsInfoCalendarName").html(t.documentsInfo[1]),$("#documentsInfoCalendarVisibleOption").length>0&&$("#documentsInfoCalendarVisibleOption").html(t.documentsInfo[2])}if(t.periodOfTime!=void 0&&t.periodOfTime!=null&&$("#periodOfTime").length>0&&t.periodOfTime.length==2&&(h="<p><h3>"+keywords[76]+"</h3>"+keywords[77]+"</p>",$("#periodOfTime").html(h),$("#documentsPeriodOrigin").length>0&&$("#documentsPeriodOrigin").html(t.periodOfTime[0]),$("#documentsPeriodTime").length>0&&$("#documentsPeriodTime").html(t.periodOfTime[1])),t.maps!=void 0&&t.maps!=null&&$("#maps").length>0){c="<p><h3>"+keywords[79]+"</h3>"+keywords[80]+"</p>";for(const e in t.maps){if(i=t.maps[e],i.text==void 0||i.img==void 0)continue;c+='<p class="desc"><img src="'+i.img+`" id="imgFamilyMap" onclick="htImageZoom('imgFamilyMap', '0%')" class="imgcenter"/>`+keywords[81]+" "+i.order+": "+i.text+" "+keywords[82]+" "+keywords[83]+"</p>"}$("#maps").length>0&&$("#maps").html(c)}if(t.prerequisites!=void 0&&t.prerequisites!=null&&$("#pre_requisites").length>0){r="";for(const e in t.prerequisites)r+=e==0?"<p><ul><li>"+t.prerequisites[e]+"</li>":"<li>"+t.prerequisites[e]+"</li>";r+="</ul></p>",$("#pre_requisites").html(r)}$("#contribution").length>0&&$("#contribution").html(keywords[54]),$("#sources-lbl").html(keywords[5]),$("#tree-sources-lbl").html(keywords[5]),$("#tree-references-lbl").html(keywords[6]),$("#references-lbl").html(keywords[6]),$("#tree-holy_references-lbl").html(keywords[7]),$("#holy_references-lbl").html(keywords[7]),$("#tree-sm-references-lbl").html(keywords[75]),$("#tree-sm-lbl").html(keywords[75]),$("#child").html(keywords[9]),$("#father").html(keywords[2]),$("#mother").html(keywords[3]),$("#grandfather01").html(keywords[11]),$("#grandmother01").html(keywords[12]),$("#grandfather02").html(keywords[13]),$("#grandmother02").html(keywords[14]),genealogicalStats.families=t.families!=void 0?t.families.length:0,l=0;for(const o in t.families){if(t.families[o].id==void 0||t.families[o].name==void 0)continue;if(s=t.families[o].id,$("#index_list").append('<li id="lnk-'+s+`"><a href="javascript:void(0);" onclick="htScroolTree('#hist-`+s+`');">`+keywords[8]+" : "+t.families[o].name+"</a></li>"),$("#trees").append('<div id="hist-'+s+'"></div>'),a=t.families[o],htAppendData("hist",s,void 0,a.name,a,e),a.people==void 0)continue;n=a.people,l+=n.length;for(const t in n){if(n[t].id==void 0||n[t].name==void 0)continue;d=n[t].id,$("#hist-"+s).append('<div id="tree-'+d+'" class="tree-person-text"></div>'),personNameMap.set(n[t].id,n[t].fullname),htAppendData("tree",d,s,n[t].fullname,n[t],e)}}genealogicalStats.people=l,o=$("#selector").val(),o!=null&&o.length>1&&(m=$("#name-"+o).val(),m!=null&&(htScroolToID("#name-"+o),htFillTree(o))),htLoadPage("tree","json","",!1),t.exercise_v2!=void 0&&t.exercise_v2.constructor===vectorConstructor&&htWriteQuestions(t.exercise_v2,"",0),t.game_v1!=void 0&&t.game_v1.constructor===vectorConstructor&&htWriteGame(t.game_v1,"",1),t.fill_dates!=void 0&&t.fill_dates.constructor===vectorConstructor?htFillHTDate(t.fill_dates):t.date_time!=void 0&&t.date_time.constructor===vectorConstructor&&htFillHTDate(t.date_time),$("#loading_msg").hide()}function htSetMapFamily(e,t,n,s){if(t==null&&n==null){familyMap.set(e,"null&null&t");return}var o="";t!=null?o+=t:o+="null",n!=null?o+="&"+n:o+="&null",o+=s=="theory"?"&t":"&h",familyMap.set(e,o)}function htMountCurrentLinkBasis(e,t){var o,i,n=window.location.href,s=n.search("#");return s<0&&(s=n.search("\\?")),o=s>0?n.substring(0,s):n,o+="?page=tree&arg="+e,t!=null&&(i=n.search("page=tree"),i>=0&&(o+="&person_id="+t)),o}function htSetCurrentLinkBasis(e,t,n){var s=n??htMountCurrentLinkBasis(e,t);return window.history.replaceState(null,null,s),!1}function htCopyLink(e,t){var n,s=htMountCurrentLinkBasis(e,t);return htSetCurrentLinkBasis(e,t,s),s+="&lang="+$("#site_language").val()+"&cal="+$("#site_calendar").val(),n=$("<input>"),$("body").append(n),n.val(s).select(),document.execCommand("copy"),n.remove(),!1}function htMountPersonEvent(e,t,n,s){var o,a,r,c,i="<b>"+e+"</b> ";for(const e in t){if(a=t[e],a.date==void 0)continue;e!=0&&(i+=" "+keywords[91]+" "),i+=htMountSpecificDate(a.date[0],n,s)+" (",o=a.sources;for(const e in o)e!=0&&(i+=" ; "),r=htFillHistorySourcesSelectFunction(o[e].type),c=o[e].date!=void 0?", "+htMountSpecificDate(o[e].date,n,s):"",i+='<a href="#" onclick="htCleanSources(); '+r+"('"+o[e].uuid+`'); return false;"><i>`+o[e].text+" "+c+"</i></a>";i+=")"}return i}function htMountPersonEvents(e){var n,s,o,i,a,r,c,l,d,t="";if(e.is_real==void 0)return t;if(s=$("#site_language").val(),o=$("#site_calendar").val(),e.is_real){if(t='<div class="personal_events_class">'+keywords[95],c=t,i="",e.haplogroup!=void 0&&e.haplogroup.length>0){t+="<b>"+keywords[103]+"</b>: ";for(const i in e.haplogroup){a=e.haplogroup[i],i!=0&&(t+=", "),n=a.sources,r="";for(const e in n)e!=0&&(text+=" ; "),l=htFillHistorySourcesSelectFunction(n[e].type),d=n[e].date!=void 0?", "+htMountSpecificDate(n[e].date,s,o):"",r+='<a href="#" onclick="htCleanSources(); '+l+"('"+n[e].uuid+`'); return false;"><i>`+n[e].text+" "+d+"</i></a>";t+=a.haplogroup+" ("+a.type+") ("+r+")"}t+="<br />"}e.sex!=void 0&&e.sex.length>0&&(i=e.sex),e.gender!=void 0&&e.gender.length>0&&(i+=" / "+e.gender),i.length>0&&(t+="<b>"+keywords[100]+"/"+keywords[101]+"</b>: "+i+"<br />"),e.birth!=void 0&&(t+=htMountPersonEvent(keywords[92],e.birth,s,o)+"<br />"),e.baptism!=void 0&&(t+=htMountPersonEvent(keywords[93],e.baptism,s,o)+"<br />"),e.surname!=void 0&&(t+="<b>"+keywords[104]+"</b>: "+e.surname+"<br />"),e.patronymic!=void 0&&(t+="<b>"+keywords[105]+"</b>: "+e.patronymic+"<br />"),e.death!=void 0&&(t+=htMountPersonEvent(keywords[94],e.death,s,o)+"<br />"),c.length==t.length&&(t+=keywords[99]),t+="</div>"}else t='<div class="no_personal_events_class">'+keywords[95]+keywords[96]+keywords[97]+"</div>";return t}function htAppendData(e,t,n,s,o,i){var s,a,r,c,l,d,u,h,m,f,g,v,b,j,y,w,O,x,C,E,k,A,S,M,F,T,z,D,N,L,P,H,I,B,R=o.history,_=o.parents,p=o.marriages;if(R!=null&&((_==null||p==null)&&e!="tree"?(C=keywords[8],F=`<a href="javascript:void(0);" onclick="htScroolToID('#index_list');">`+keywords[78]+"</a>"):(C=keywords[9],F=""),P=htMountPersonEvents(o),$("#"+e+"-"+t).append('<h3 id="name-'+t+`" onclick="htFillTree('`+t+"'); htSetCurrentLinkBasis('"+i+"', '"+t+"',"+void 0+');">'+C+" : "+s+` (<a href="javascript:void(0);" onclick="htCopyLink('`+i+"', '"+t+`'); return false;" >`+keywords[26]+"</a>). "+F+"</h3><p>"+P+"</p>")),B=o.primary_source,I=o.references,H=o.holy_references,htFillHistorySources(t,"#"+e+"-"+t,R,"tree-default-align",t),z=null,_!=null)for(const o in _)r=_[o],m=e+"-parents-"+t,d=r.father_id?r.father_id:r.father,l=r.mother_id?r.mother_id:r.mother,d==null&&l==null?($("#"+e+"-"+t).append('<div id="'+m+'" class="tree-real-family-text"><p><b>'+keywords[0]+"</b>: "+keywords[10]+"</p></div>"),familyMap.set(t,"null&null&t")):(u="",s="",d!=null&&(z=d,m+=d+"-",s=personNameMap.get(d),s!=null?u+=`<a href="javascript:void(0);" onclick="htScroolTree('#name-`+d+"'); htFillTree('"+d+"'); htSetCurrentLinkBasis('"+i+"', '"+d+"',"+void 0+');">'+s+"</a> ":r.father_name!=void 0&&r.father_family!=void 0&&r.father_family!=n&&(u+='<a href="index.html?page=tree&arg='+r.father_family+"&person_id="+d+"&lang="+$("#site_language").val()+"&cal="+$("#site_calendar").val()+`" onclick="htLoadPage('tree', 'html', '`+r.father_family+"&person_id="+d+`', false); return false;">`+r.father_name+"</a> & ")),m+="-",l!=null&&(m+=l+"-",s=personNameMap.get(l),s!=null?r.mother_family!=void 0?r.mother_family==n||r.mother_external_family_file!=void 0&&r.mother_external_family_file==!1?u+=` & <a href="javascript:void(0);" onclick="htScroolTree('#name-`+l+"'); htFillTree('"+l+"'); htSetCurrentLinkBasis('"+i+"', '"+l+"',"+void 0+');">'+s+"</a>":u+='<a href="index.html?page=tree&arg='+r.mother_family+"&person_id="+l+"&lang="+$("#site_language").val()+"&cal="+$("#site_calendar").val()+`" onclick="htLoadPage('tree', 'html', '`+r.mother_family+"&person_id="+l+`', false); return false;">`+s+"</a>":u+=" & "+s:r.mother_name!=void 0&&r.mother_family!=void 0&&r.mother_family!=n&&(u+='<a href="index.html?page=tree&arg='+r.mother_family+"&person_id="+l+"&lang="+$("#site_language").val()+"&cal="+$("#site_calendar").val()+`" onclick="htLoadPage('tree', 'html', '`+r.mother_family+"&person_id="+l+`', false); return false;">`+r.mother_name+"</a>")),r.type=="theory"?(M=keywords[0],A="tree-real-family-text"):(M=keywords[1],A="tree-hipothetical-family-text"),u.length==0&&(u+=r.father_name+" & "+r.mother_name),$("#"+e+"-"+t).append('<div id="'+m+'" class="'+A+'"><p><b>'+M+"</b>: "+u+"</p></div>"));if(p!=null){L=$("#site_language").val(),N=$("#site_calendar").val(),genealogicalStats.marriages+=p.length;for(const s in p)c=p[s],x=e+"-relationship-"+c.id,O=c.type,S=c.official,c.id==void 0?$("#"+e+"-"+t).append('<div id="'+x+'" class="tree-real-family-text"><p><b>'+keywords[17]+"</b>: "+keywords[19]+"</p></div>"):(h="",O=="theory"?(k="tree-real-family-text",w=keywords[17]):(k="tree-hipothetical-family-text",w=keywords[18],h='<div class="no_personal_events_class"><p>'+keywords[102]+keywords[96]+keywords[98]+"</p></div>"),S!=null&&S==!1&&(w=keywords[86]),g="",y="",c.date_time!=void 0&&c.date_time.sources!=null&&(y=htMountPersonEvent(" ",c.date_time,L,N)),c.family_id==void 0?g=c.name:n==c.family_id||c.external_family_file!=void 0&&c.external_family_file==!1?g=`<a href="javascript:void(0);" onclick="htScroolTree('#name-`+c.id+"'); htFillTree('"+c.id+"'); htSetCurrentLinkBasis('"+i+"', '"+c.id+"',"+void 0+');">'+c.name+"</a>"+y:g='<a href="index.html?page=tree&arg='+c.family_id+"&person_id="+c.id+"&lang="+$("#site_language").val()+"&cal="+$("#site_calendar").val()+`" onclick="htLoadPage('tree', 'html', '`+c.family_id+"&person_id="+c.id+`', false); return false;">`+c.name+"</a>"+y,$("#"+e+"-"+t).append('<div id="'+x+'" class="'+k+'"><p><b>'+w+"</b> "+g+".</p>"+h+"</div>"),htFillHistorySources(c.id,"#"+x,c.history,"tree-default-align",c.id),D=personNameMap.has(c.id),D==!1&&personNameMap.set(c.id,c.name))}if(b=o.children,b!=null){genealogicalStats.children+=b.length;for(const s in b)a=b[s],E=e+"-children-"+a.id,T=e+"-relationship-",a.marriage_id!=void 0&&(T+=a.marriage_id),O=a.type,h="",O=="theory"?(j="tree-real-child-text",f=keywords[20]):(j="tree-hipothetical-child-text",f=keywords[21],h='<div class="no_personal_events_class"><p>'+keywords[102]+keywords[96]+keywords[98]+"</p></div>"),v="",a.family_id==void 0||a.family_id.length==0||a.external_family_file!=void 0&&a.external_family_file==!1&&a.add_link==!1?v=f+" "+a.name:n==a.family_id||a.external_family_file!=void 0&&a.external_family_file==!1?v=`<a href="javascript:void(0);" onclick="htScroolTree('#name-`+a.id+"'); htFillTree('"+a.id+"'); htSetCurrentLinkBasis('"+i+"', '"+a.id+"',"+void 0+');">'+f+" "+a.name+"</a>":v='<a href="index.html?page=tree&arg='+a.family_id+"&person_id="+a.id+"&lang="+$("#site_language").val()+"&cal="+$("#site_calendar").val()+`" onclick="htLoadPage('tree', 'html', '`+a.family_id+"&person_id="+a.id+`', false);">`+f+" "+a.name+"</a>",$("#"+T).append('<div id="'+E+'" class="'+j+'"><p><b>'+v+"</b>: </p>"+h+"</div>"),$("#"+E).append('<div id="with-parent-'+a.id+'" class="'+j+'"></div>'),htFillHistorySources("parent-"+a.id,"#with-parent-"+a.id,a.history,"",a.id),htSetMapFamily(a.id,t,a.marriage_id,a.type),personNameMap.set(a.id,a.name)}}function htFillHistorySources(e,t,n,s,o){var i,a,r=$("#site_language").val(),c=$("#site_calendar").val();if(n!=null)for(const e in n)i=n[e],a=i.text!=void 0&&i.format!=void 0?htParagraphFromObject(i,r,c):"<p>"+i+"</p>",$(t).append('<p class="'+s+`" onclick="htFillTree('`+o+`'); ">`+a+"</p>")}function htFillMapSource(e,t){if(t==null)return;var n,s,o,i=$("#site_language").val(),a=$("#site_calendar").val();for(const r in t)if(o=e.has(t[r].id),o==!1){if(s="",t[r].date!=void 0){if(n=t[r].date.split("-"),n.length!=3)continue;s=htConvertGregorianDate(a,i,n[0],n[1],n[2])}e.set(t[r].id,{citation:t[r].citation,date:s,url:t[r].url})}}function htLoadSource(e,t,n,s){$(e).html("");var o,i,a=n.has(s);if(a&&(i=n.get(s),o=i.split(";"),o.length>0))for(let n=0;n<o.length;n++)htFillSource(e,t,o[n])}function htCleanSources(){$("#tree-source").html(""),$("#tree-ref").html(""),$("#tree-holy-ref").html(""),$("#tree-sm-ref").html("")}function htFillSource(e,t,n){var o,i,s=t.get(n);s!=null&&(o="",s.date!=void 0&&s.date!=null&&s.date.length>0&&(o=". [ "+keywords[22]+" "+s.date+" ]."),i="",s.url!=void 0&&s.url!=null&&s.url.length>0&&(i=keywords[23]+' <a target="_blank" href="'+s.url+'"> '+s.url+"</a>"),$(e).append("<p>"+s.citation+" "+o+" "+i+"</p>"))}function htFillPrimarySource(e){htFillSource("#tree-source",primarySourceMap,e)}function htFillReferenceSource(e){htFillSource("#tree-ref",refSourceMap,e)}function htFillHolySource(e){htFillSource("#tree-holy-ref",holyRefSourceMap,e)}function htFillSMSource(e){htFillSource("#tree-sm-ref",smSourceMap,e)}function htHideTree(e){e>1&&$("#child").hide(),e>0&&($("#father").hide(),$("#mother").hide()),e>-1&&(e>1&&($("#grandfather01").hide(),$("#grandmother01").hide()),e>0&&($("#grandfather02").hide(),$("#grandmother02").hide()))}function htScroolTree(e){var t=$(e).val();t!=null&&$("html, body").scrollTop($(e).offset().top)}function htFillTree(e){if(htHideTree(2,2),e==null)return;var n,s,o,i,a,r,l,d,u,h,t="theory",c=htFillDivTree("#child",e,t);if(c==null){htHideTree(1,2);return}if(n=c.split("&"),n.length==0){htHideTree(1,2);return}t=n[2]=="t"?"theory":"hypothetical",i=htFillDivTree("#father",n[0],t),i==null?htHideTree(0,1):(s=i.split("&"),s.length!=3?htHideTree(0,1):(a=s[2]=="t"?"theory":"hypothetical",l=htFillDivTree("#grandfather01",s[0],a),d=htFillDivTree("#grandmother01",s[1],a))),r=htFillDivTree("#mother",n[1],t),r==null?htHideTree(0,2):(o=r.split("&"),o.length!=3?htHideTree(0,2):(t=o[2]=="t"?"theory":"hypothetical",u=htFillDivTree("#grandmother02",o[0],t),h=htFillDivTree("#grandfather02",o[1],t)))}function htFillDivTree(e,t,n){if(t==null||t=="null")return $(e).hide(),void 0;var o,i,s=personNameMap.get(t);return s==null?void 0:($(e).html(""),i=s,o=s.search("\\("),$(e).append(i.substring(0,o!=-1?o:32)),n=="theory"?($(e).css("border-style","solid"),$(e).css("font-style","normal")):($(e).css("border-style","dashed"),$(e).css("font-style","italic")),$(e).show(),familyMap.get(t))}function getRandomArbitrary(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)}function htInsertNumberField(e,t,n){return'<div class="number-input" id="'+e+'"><i class="fa-solid fa-caret-down downArrowWithFA" name="numberDown'+e+'"></i><input id="numberField'+e+'" type="number" min="'+t+'" max="'+n+'" readonly /><i class="fa-solid fa-caret-up upArrowWithFA" name="numberUp'+e+'"></i></div>'}function htShowSlideDivs(e,t){if(e==null)return;for(let t=0;t<e.length;t++)e[t].style.display="none";e[t].style.display="block"}function htShowSlideDivsAuto(e,t,n){if(e==null)return;for(let t=0;t<e.length;t++)e[t].style.display="none";return e[t].style.display="block",++t,n==!0&&t==e.length?0:(t==e.length?t=0:t<0&&(t=e.length-1),setTimeout(()=>{smGameTimeoutID=htShowSlideDivsAuto(e,t,n)},6e3))}